// Copyright (c) 2024 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.1.0-esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.1.0-esm/index.mjs";import{isPrimitive as i}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.1.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.1.0-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@v0.1.0-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@v0.1.1-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-max@v0.1.1-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@v0.1.0-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@v0.1.1-esm/index.mjs";function a(i){var r,s;if(!(this instanceof a))return new a(i);if(e(i))for(r=[],s=0;s<i;s++)r.push(0);else{if(!t(i))throw new TypeError(u("invalid argument. Must provide either a valid buffer size (i.e., a positive integer) or an array-like object which can serve as the underlying buffer. Value: `%s`.",i));r=i}return this._buffer=h(r),this._length=r.length,this._count=0,this._i=-1,this}r(a.prototype,"clear",(function(){return this._count=0,this._i=-1,this})),s(a.prototype,"count",(function(){return this._count})),s(a.prototype,"full",(function(){return this._count===this._length})),r(a.prototype,"iterator",(function(t){var e,s,h,a,l,d;if(arguments.length){if(!i(t))throw new TypeError(u("invalid argument. Must provide a nonnegative integer. Value: `%s`.",t));a=t}else a=o;return s=this,d=this._i,l=0,r(e={},"next",f),r(e,"return",c),n&&r(e,n,p),e;function f(){return l+=1,h||l>a?{done:!0}:s._count!==s._length?(h=!0,{done:!0}):(d=(d+1)%s._length,{value:s._buffer.accessors[0](s._buffer.data,d),done:!1})}function c(t){return h=!0,arguments.length?{value:t,done:!0}:{done:!0}}function p(){return s.iterator(a)}})),s(a.prototype,"length",(function(){return this._length})),r(a.prototype,"push",(function(t){var e,i,r,s;return r=this._buffer.data,i=this._buffer.accessors[0],e=this._buffer.accessors[1],this._i=(this._i+1)%this._length,this._count<this._length?(e(r,this._i,t),void(this._count+=1)):(s=i(r,this._i),e(r,this._i,t),s)})),r(a.prototype,"toArray",(function(){var t,e,i,r,s;for(t=this._buffer.data,e=this._buffer.accessors[0],i=[],s=1;s<=this._count;s++)r=(this._i+s)%this._count,i.push(e(t,r));return i})),r(a.prototype,"toJSON",(function(){var t={type:"circular-buffer"};return t.length=this._length,t.data=this.toArray(),t}));export{a as default};
//# sourceMappingURL=index.mjs.map
