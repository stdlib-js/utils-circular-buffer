// Copyright (c) 2022 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import e from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-max@esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/string-format@esm/index.mjs";var a=t,l=e.isPrimitive,d=i.isPrimitive,f=r,p=n,m=s,c=o,g=h,_=u;function v(t){var e,i;if(!(this instanceof v))return new v(t);if(l(t))for(e=[],i=0;i<t;i++)e.push(0);else{if(!a(t))throw new TypeError(_("invalid argument. Must provide either a valid buffer size (positive integer) or an array-like object which can serve as the underlying buffer. Value: `%s`.",t));e=t}return this._buffer=g(e),this._length=e.length,this._count=0,this._i=-1,this}f(v.prototype,"clear",(function(){return this._count=0,this._i=-1,this})),p(v.prototype,"count",(function(){return this._count})),p(v.prototype,"full",(function(){return this._count===this._length})),f(v.prototype,"iterator",(function(t){var e,i,r,n,s,o;if(arguments.length){if(!d(t))throw new TypeError(_("invalid argument. Must provide a nonnegative integer. Value: `%s`.",t));n=t}else n=c;return i=this,o=this._i,s=0,f(e={},"next",h),f(e,"return",u),m&&f(e,m,a),e;function h(){return s+=1,r||s>n?{done:!0}:i._count!==i._length?(r=!0,{done:!0}):(o=(o+1)%i._length,{value:i._buffer.getter(i._buffer.data,o),done:!1})}function u(t){return r=!0,arguments.length?{value:t,done:!0}:{done:!0}}function a(){return i.iterator(n)}})),p(v.prototype,"length",(function(){return this._length})),f(v.prototype,"push",(function(t){var e,i,r,n;return r=this._buffer.data,i=this._buffer.getter,e=this._buffer.setter,this._i=(this._i+1)%this._length,this._count<this._length?(e(r,this._i,t),void(this._count+=1)):(n=i(r,this._i),e(r,this._i,t),n)})),f(v.prototype,"toArray",(function(){var t,e,i,r,n;for(t=this._buffer.data,e=this._buffer.getter,i=[],n=1;n<=this._count;n++)r=(this._i+n)%this._count,i.push(e(t,r));return i})),f(v.prototype,"toJSON",(function(){var t={type:"circular-buffer"};return t.length=this._length,t.data=this.toArray(),t}));var j=v;export{j as default};
//# sourceMappingURL=index.mjs.map
