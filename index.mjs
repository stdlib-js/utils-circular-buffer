// Copyright (c) 2025 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.2.2-esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.2.2-esm/index.mjs";import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.2.2-esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.2.1-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@v0.2.2-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@v0.2.2-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-max@v0.2.2-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@v0.2.1-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.2.2-esm/index.mjs";function f(r){var s,i;if(!(this instanceof f))return new f(r);if(e(r))for(s=[],i=0;i<r;i++)s.push(0);else{if(!t(r))throw new TypeError(u("1S3An",r));s=r}return this._buffer=h(s),this._length=s.length,this._count=0,this._i=-1,this}s(f.prototype,"clear",(function(){return this._count=0,this._i=-1,this})),i(f.prototype,"count",(function(){return this._count})),i(f.prototype,"full",(function(){return this._count===this._length})),s(f.prototype,"iterator",(function(t){var e,i,h,f,d,l;if(arguments.length){if(!r(t))throw new TypeError(u("1S32K",t));f=t}else f=o;return i=this,l=this._i,d=0,s(e={},"next",(function(){if(d+=1,h||d>f)return{done:!0};if(i._count!==i._length)return h=!0,{done:!0};return l=(l+1)%i._length,{value:i._buffer.accessors[0](i._buffer.data,l),done:!1}})),s(e,"return",(function(t){if(h=!0,arguments.length)return{value:t,done:!0};return{done:!0}})),n&&s(e,n,(function(){return i.iterator(f)})),e})),i(f.prototype,"length",(function(){return this._length})),s(f.prototype,"push",(function(t){var e,r,s,i;return s=this._buffer.data,r=this._buffer.accessors[0],e=this._buffer.accessors[1],this._i=(this._i+1)%this._length,this._count<this._length?(e(s,this._i,t),void(this._count+=1)):(i=r(s,this._i),e(s,this._i,t),i)})),s(f.prototype,"toArray",(function(){var t,e,r,s,i;for(t=this._buffer.data,e=this._buffer.accessors[0],r=[],i=1;i<=this._count;i++)s=(this._i+i)%this._count,r.push(e(t,s));return r})),s(f.prototype,"toJSON",(function(){var t={type:"circular-buffer"};return t.length=this._length,t.data=this.toArray(),t}));export{f as default};
//# sourceMappingURL=index.mjs.map
