// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@v0.1.0-esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@v0.1.0-esm/index.mjs";import{isPrimitive as s}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@v0.1.0-esm/index.mjs";import r from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@v0.1.0-esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@v0.1.0-esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@v0.1.0-esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-max@v0.1.0-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@v0.1.0-esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.1.0-esm/index.mjs";function f(s){var r,i;if(!(this instanceof f))return new f(s);if(e(s))for(r=[],i=0;i<s;i++)r.push(0);else{if(!t(s))throw new TypeError(u("1S3An,PK",s));r=s}return this._buffer=h(r),this._length=r.length,this._count=0,this._i=-1,this}r(f.prototype,"clear",(function(){return this._count=0,this._i=-1,this})),i(f.prototype,"count",(function(){return this._count})),i(f.prototype,"full",(function(){return this._count===this._length})),r(f.prototype,"iterator",(function(t){var e,i,h,f,d,l;if(arguments.length){if(!s(t))throw new TypeError(u("1S32K,Ez",t));f=t}else f=o;return i=this,l=this._i,d=0,r(e={},"next",c),r(e,"return",a),n&&r(e,n,p),e;function c(){return d+=1,h||d>f?{done:!0}:i._count!==i._length?(h=!0,{done:!0}):(l=(l+1)%i._length,{value:i._buffer.accessors[0](i._buffer.data,l),done:!1})}function a(t){return h=!0,arguments.length?{value:t,done:!0}:{done:!0}}function p(){return i.iterator(f)}})),i(f.prototype,"length",(function(){return this._length})),r(f.prototype,"push",(function(t){var e,s,r,i;return r=this._buffer.data,s=this._buffer.accessors[0],e=this._buffer.accessors[1],this._i=(this._i+1)%this._length,this._count<this._length?(e(r,this._i,t),void(this._count+=1)):(i=s(r,this._i),e(r,this._i,t),i)})),r(f.prototype,"toArray",(function(){var t,e,s,r,i;for(t=this._buffer.data,e=this._buffer.accessors[0],s=[],i=1;i<=this._count;i++)r=(this._i+i)%this._count,s.push(e(t,r));return s})),r(f.prototype,"toJSON",(function(){var t={type:"circular-buffer"};return t.length=this._length,t.data=this.toArray(),t}));export{f as default};
//# sourceMappingURL=index.mjs.map
