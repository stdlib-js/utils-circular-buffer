// Copyright (c) 2023 The Stdlib Authors. License is Apache-2.0: http://www.apache.org/licenses/LICENSE-2.0
/// <reference types="./index.d.ts" />
import t from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-collection@esm/index.mjs";import{isPrimitive as e}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-positive-integer@esm/index.mjs";import{isPrimitive as r}from"https://cdn.jsdelivr.net/gh/stdlib-js/assert-is-nonnegative-integer@esm/index.mjs";import s from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-property@esm/index.mjs";import i from"https://cdn.jsdelivr.net/gh/stdlib-js/utils-define-nonenumerable-read-only-accessor@esm/index.mjs";import n from"https://cdn.jsdelivr.net/gh/stdlib-js/symbol-iterator@esm/index.mjs";import o from"https://cdn.jsdelivr.net/gh/stdlib-js/constants-float64-max@v0.0.8-esm/index.mjs";import h from"https://cdn.jsdelivr.net/gh/stdlib-js/array-base-arraylike2object@esm/index.mjs";import u from"https://cdn.jsdelivr.net/gh/stdlib-js/error-tools-fmtprodmsg@v0.0.2-esm/index.mjs";function a(r){var s,i;if(!(this instanceof a))return new a(r);if(e(r))for(s=[],i=0;i<r;i++)s.push(0);else{if(!t(r))throw new TypeError(u("invalid argument. Must provide either a valid buffer size (i.e., a positive integer) or an array-like object which can serve as the underlying buffer. Value: `%s`.",r));s=r}return this._buffer=h(s),this._length=s.length,this._count=0,this._i=-1,this}s(a.prototype,"clear",(function(){return this._count=0,this._i=-1,this})),i(a.prototype,"count",(function(){return this._count})),i(a.prototype,"full",(function(){return this._count===this._length})),s(a.prototype,"iterator",(function(t){var e,i,h,a,f,l;if(arguments.length){if(!r(t))throw new TypeError(u("0is2V",t));a=t}else a=o;return i=this,l=this._i,f=0,s(e={},"next",d),s(e,"return",c),n&&s(e,n,p),e;function d(){return f+=1,h||f>a?{done:!0}:i._count!==i._length?(h=!0,{done:!0}):(l=(l+1)%i._length,{value:i._buffer.accessors[0](i._buffer.data,l),done:!1})}function c(t){return h=!0,arguments.length?{value:t,done:!0}:{done:!0}}function p(){return i.iterator(a)}})),i(a.prototype,"length",(function(){return this._length})),s(a.prototype,"push",(function(t){var e,r,s,i;return s=this._buffer.data,r=this._buffer.accessors[0],e=this._buffer.accessors[1],this._i=(this._i+1)%this._length,this._count<this._length?(e(s,this._i,t),void(this._count+=1)):(i=r(s,this._i),e(s,this._i,t),i)})),s(a.prototype,"toArray",(function(){var t,e,r,s,i;for(t=this._buffer.data,e=this._buffer.accessors[0],r=[],i=1;i<=this._count;i++)s=(this._i+i)%this._count,r.push(e(t,s));return r})),s(a.prototype,"toJSON",(function(){var t={type:"circular-buffer"};return t.length=this._length,t.data=this.toArray(),t}));export{a as default};
//# sourceMappingURL=index.mjs.map
